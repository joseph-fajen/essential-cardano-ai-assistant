{
  "url": "https://developers.cardano.org/docs/integrate-cardano/point-of-sale",
  "content": "![Cardano Logo](/img/cardano-black.svg)\n![Cardano Logo](/img/cardano-white.svg)\n\n# Receiving payments (Blockfrost API)\n\nWelcome to the documentation of a Point of Sale (POS) application built using Cardano APIs. This guide will walk you through the key features and functionalities of the application.\n\n![Point Of Sale](/assets/images/point-of-sale-example-2b087d0aa12883f1814ca754d6dde59b.png)\n\n![Point Of Sale](/assets/images/point-of-sale-example-2b087d0aa12883f1814ca754d6dde59b.png)\n\n### Getting Started[​](#getting-started \"Direct link to Getting Started\")\n\nIn this tutorial, we will guide you through the process of building a fully functional Point of Sale application on top of the Cardano blockchain. To get started, you will need to fork the [starting point repository](https://github.com/fill-the-fill/cardano-pos-starting-point), which contains all the necessary files and configurations to begin building your own Point of Sale application.\n\nThe [starting point repository](https://github.com/fill-the-fill/cardano-pos-starting-point) already provides simple CSS and logic behind inputs, props passing and other things, so in this guide, we will mostly focus on connecting APIs and retrieving data from them to create a fully functional Point of Sale application using Cardano.\n\nMake sure to run the command `npm install` in your terminal to install all the necessary dependencies.\n\n`npm install`\n\nUse the command `npm run dev` and your project will be up and running.\n\n`npm run dev`\n\n### Structure of the project[​](#structure-of-the-project \"Direct link to Structure of the project\")\n\n`src  \n├── constants  \n├── components  \n├── pages  \n│ ├── api  \n| └── index.js  \n├── styles  \n│ ├── pos.modules.css  \n├── .env.local  \n├── .env.example  \n├── README.md`\n\n### Project structure rundown[​](#project-structure-rundown \"Direct link to Project structure rundown\")\n\n`/constants/`\n`/components/`\n`/pages/`\n`/styles/`\n`.env.local`\n`.env.example`\n\n### Requirements[​](#requirements \"Direct link to Requirements\")\n\nWe'll need to obtain API keys for both services. These API keys will allow us to access the data and functionality we need to build and test our application.\n\nPlease refer to `.env.example` in the repo and create `.env.local` file. Your keys should be stored there.\n\n`.env.example`\n`.env.local`\n\n#### Get Blockfrost Key[​](#get-blockfrost-key \"Direct link to Get Blockfrost Key\")\n\n`.env.local`\n`BLOCKFROST_API_KEY`\n\n#### Get CoinMarketCap Key[​](#get-coinmarketcap-key \"Direct link to Get CoinMarketCap Key\")\n\n`.env.local`\n`COINMARKETCAP_API_KEY`\n\n### Adding Constants[​](#adding-constants \"Direct link to Adding Constants\")\n\nBefore creating any API requests, it is important to add constants such as base URLs and endpoints. These constants will be used throughout the project and will make it easier to make changes or updates in the future.\n\nNavigate to `constants` folder, create `links.js` file and insert the following based on network you will be using:\n\n`constants`\n`links.js`\n`export const LINKS = {  \n CARDANO_SCAN: \"https://preview.cardanoscan.io/address/\",  \n BLOCKFROST_ADDRESS: \"https://cardano-preview.blockfrost.io/api/v0/addresses/\",  \n COINMARKETCAP_ADA_USD_PAIR:  \n \"https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=ADA&convert=USD\",  \n};`\n`export const LINKS = {  \n CARDANO_SCAN: \"https://preprod.cardanoscan.io/address/\",  \n BLOCKFROST_ADDRESS: \"https://cardano-preprod.blockfrost.io/api/v0/addresses/\",  \n COINMARKETCAP_ADA_USD_PAIR:  \n \"https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=ADA&convert=USD\",  \n};`\n`export const LINKS = {  \n CARDANO_SCAN: \"https://cardanoscan.io/address/\",  \n BLOCKFROST_ADDRESS: \"https://cardano-mainnet.blockfrost.io/api/v0/addresses/\",  \n COINMARKETCAP_ADA_USD_PAIR:  \n \"https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=ADA&convert=USD\",  \n};`\n\n### Creating API files[​](#creating-api-files \"Direct link to Creating API files\")\n\nIn `api` folder create `blockfrost.js` file and insert the following code:\n\n`api`\n`blockfrost.js`\n`import { LINKS } from \"../../constants/links\";  \n  \nexport default async function handler(req, res) {  \n const { address } = req.query;  \n const projectId = process.env.BLOCKFROST_API_KEY;  \n const url = LINKS.BLOCKFROST_ADDRESS + address + \"/total\";  \n  \n const response = await fetch(url, {  \n headers: {  \n \"Content-Type\": \"application/json\",  \n project_id: projectId,  \n },  \n });  \n  \n const data = await response.json();  \n  \n res.status(200).json({ value: data });  \n}`\n\nIn this file, we are creating an API request to `Blockfrost` using personal key. We use constant link address and submit `projectId` to get a `data` response.\n\n`Blockfrost`\n`projectId`\n`data`\n\nNow let’s do the same with CoinMarketCap. Add `coinmarketcap.js` file into `api` folder to receive pair data:\n\n`coinmarketcap.js`\n`api`\n`import { LINKS } from \"../../constants/links\";  \n  \nexport default async function handler(req, res) {  \n const url = LINKS.COINMARKETCAP_ADA_USD_PAIR;  \n  \n const response = await fetch(url, {  \n headers: {  \n \"X-CMC_PRO_API_KEY\": process.env.COINMARKETCAP_API_KEY,  \n },  \n });  \n  \n const data = await response.json();  \n const adaPrice = data.data.ADA.quote.USD.price;  \n  \n res.status(200).json({ value: adaPrice });  \n}`\n\nIn this file, we are creating another API request to `CoinMarketCap` to receive price of 1 ada in USD.\n\n`CoinMarketCap`\n\n### Connecting APIs[​](#connecting-apis \"Direct link to Connecting APIs\")\n\nNow that all of the APIs are set up and ready to be used, it's time to move onto the `index.js` file and start adding the necessary functionalities and API requests.\n\n`index.js`\n\nTo fetch the `ada-usd` price upon loading the page, we need to add the `fetchAdaPrice` and `useEffect` functions to the `index.js` file:\n\n`ada-usd`\n`fetchAdaPrice`\n`useEffect`\n`index.js`\n `// Fetch ada price from CoinMarketCap  \n const fetchAdaPrice = async () => {  \n fetch(\"/api/coinmarketcap\")  \n .then((response) => {  \n if (!response.ok) {  \n throw new Error(\"Network response was not ok\");  \n }  \n return response.json();  \n })  \n .then((data) => setAdaValue(data.value))  \n .catch((error) => console.error(\"Error:\", error));  \n };  \n  \n useEffect(() => {  \n const fetchPrice = async () => {  \n await fetchAdaPrice();  \n };  \n fetchPrice();  \n }, []);`\n\nThis code will make an API request to retrieve the current price and display it on the page for the user to see. The `fetchAdaPrice` function will perform an API request to CoinMarketCap and set the `adaValue` state with the current value. Later on, in the return statement, the calculated value based on the input amount will be displayed as:\n\n`fetchAdaPrice`\n`adaValue`\n`{amount} $ = {(amount / adaValue).toFixed(2)} ₳`\n\n## Connecting Blockfrost API to Popup[​](#connecting-blockfrost-api-to-popup \"Direct link to Connecting Blockfrost API to Popup\")\n\nNext, we will add some Blockfrost API requests to the popup to compare the inserted address balance and see if the transaction went through successfully.\n\nNavigate to `components` folder into `popup.js`. The current popup generates a QR code for users to scan, which redirects with a [CIP-13](https://cips.cardano.org/cip/CIP-0013) URI guidelines and automatically fills in the details for the transaction, such as the address and the amount to be sent. For now, the application does not connect to the API, so we need to add a few functions to ensure application able to retrieve the necessary data from the API.\n\n`components`\n`popup.js`\n\nFirst, lets add `fetchAddressQuantityOnOpen` function to fetch balance of the address:\n\n`fetchAddressQuantityOnOpen`\n `// Fetch balance of ada in the address when opening popup  \n const fetchAddressQuantityOnOpen = async () => {  \n address.length &&  \n fetch(`/api/blockfrost?address=${address}`)  \n .then((response) => {  \n if (!response.ok) {  \n throw new Error(\"Network response was not ok\");  \n }  \n return response.json();  \n })  \n .then((data) => {  \n if (data.value.received_sum) {  \n setBalance(data.value.received_sum[0].quantity / 1000000);  \n }  \n })  \n .catch((error) => console.error(\"Error:\", error));  \n };`\n\nThis function will store current balance in the store called `balance`.\n\n`balance`\n\nNow let’s create another function called `CompareQuantity` that fetches address balance but checks it every few seconds:\n\n`CompareQuantity`\n `// Fetch balance of ada in the address every few seconds to compare it with the initial balance from fetchAddressQuantityOnOpen()  \n const CompareQuantity = async () => {  \n fetch(`/api/blockfrost?address=${address}`)  \n .then((response) => {  \n if (!response.ok) {  \n throw new Error(\"Network response was not ok\");  \n }  \n return response.json();  \n })  \n .then((data) => {  \n if (data.value.received_sum) {  \n setNewBalance(data.value.received_sum[0].quantity / 1000000);  \n }  \n })  \n .catch((error) => console.error(\"Error:\", error));  \n };  \n  \n // Fetch ada balance every 3 seconds  \n useEffect(() => {  \n address && fetchAddressQuantityOnOpen(address);  \n const interval =  \n address &&  \n setInterval(() => {  \n const result = CompareQuantity(address);  \n return result;  \n }, 3000);  \n return () => clearInterval(interval);  \n }, [address]);`\n\nThis function will store new balance in the store called `newBalance` state and using `useEffect` will continue fetching data every few seconds.\n\n`newBalance`\n`useEffect`\n\nLater on in the code, we compare `balance` and `newBalance` states. If `newBalance` is greater or equal by the `amount` requested, the `Waiting for payment…` will be changed to `Payment received successfully`\n\n`balance`\n`newBalance`\n`newBalance`\n`amount`\n`Waiting for payment…`\n`Payment received successfully`\n\nHere it how it looks:\n\n `{newBalance - balance >= amount ? (  \n <DialogContentText className={styles.approvedConfirmation}>  \n Payment received successfully  \n </DialogContentText>  \n ) : (  \n <DialogContentText className={styles.waitingConfirmation}>  \n Waiting for payment...  \n </DialogContentText>  \n )}`\n\n#### Adding CardanoScan Redirect[​](#adding-cardanoscan-redirect \"Direct link to Adding CardanoScan Redirect\")\n\nTo add a redirect to CardanoScan in the `href` attribute of our popup component, we need to add the following code into our application.\n\n`href`\n`import { LINKS } from \"../constants/links\";`\n\nLocate into `return` section and uncomment the following section:\n\n`return`\n `<a  \n className={styles.href}  \n // href={LINKS.CARDANO_SCAN + address}  \n target=\"_blank\"  \n >  \n {address.substring(0, 30) + \"...\"}  \n </a>`\n\nCongratulations! Your Point of Sale application using Cardano is now fully functional and ready to use. You can test it by entering an amount and address into the inputs, scanning the generated QR code, performing a transaction and waiting for confirmation on the popup screen.",
  "images": [],
  "extraction_metadata": {
    "batch_number": 7,
    "extraction_timestamp": "2025-09-19T14:04:49.862174",
    "extraction_time": 2.4011168479919434,
    "source": "tavily_api_raw"
  }
}