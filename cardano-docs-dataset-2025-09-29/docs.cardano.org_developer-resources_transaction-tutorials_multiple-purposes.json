{
  "url": "https://docs.cardano.org/developer-resources/transaction-tutorials/multiple-purposes",
  "content": "![Cardano logo](/assets/cardano-logo.svg)\n![Cardano logo](/assets/cardano-logo.svg)\n\n# Multiple purposes\n\nCardano allows more complex transactions. So far you've seen various types of transactions: simple script, minting, staking, delegating, etc. But Cardano provides the flexibility to create more complex transactions and mix all the types of transactions needed. For example, adding metadata to minting transactions, or adding a staking component to a simple script transaction. This tutorial shows how to send a transaction with multiple purposes.\n\nIn this tutorial, you will learn how to:\n\nAs mentioned in the minting tutorial, one way to mint a token is by creating a script derived from a `keyHash`. For that, you first need to generate new keys and a key hash using the following commands:\n\n`keyHash`\n`cardano-cli address key-gen \\  \n --verification-key-file script.vkey \\  \n --signing-key-file script.skey  \n  \ncardano-cli address key-hash --payment-verification-key-file script.vkey  \n54a318b79a805f4f4cf0562a27302e93ed5b2e657cccdf4f6a8330ef`\n\nHaving the key hash, you can create the script as follows:\n\n`cat payment.script  \n{  \n \"keyHash\": \"54a318b79a805f4f4cf0562a27302e93ed5b2e657cccdf4f6a8330ef\",  \n \"type\": \"sig\"  \n}`\n\nYou also need to create the address and the policy ID of the script:\n\n`cardano-cli address build --payment-script-file payment.script   \naddr_test1wzgd97kc864w62ulela5ykw8m64z2nu4wjejacyfp6u7qwqyz9v9m`\n`cardano-cli transaction policyid --script-file payment.script  \n90d2fad83eaaed2b9fcffb4259c7deaa254f9574b32ee0890eb9e038`\n\n## First transaction[​](#first-transaction \"Direct link to First transaction\")\n\nFirst of all, you need to fund the script address using `payment.addr` funds:\n\n`payment.addr`\n`cardano-cli query utxo --address $(cat payment.addr)  \n TxHash TxIx Amount  \n--------------------------------------------------------------------------------------  \n12bc01bca615bb4cbe5f36b06d86092ad3c8a10e6a37e09f94a5f006f3aaf230 0 10040283782 lovelace + TxOutDatumNone`\n\nIn this transaction, the example sets a `tx-out-inline-datum` file that only contains the number 42. This is essential since you wouldn't be able to get the funds from the script if it does not have a datum:\n\n`tx-out-inline-datum`\n`cardano-cli transaction build --tx-in 12bc01bca615bb4cbe5f36b06d86092ad3c8a10e6a37e09f94a5f006f3aaf230#0 --tx-out $(cat payment.script.addr)+10000000 --change-address $(cat payment.addr) --tx-out-inline-datum-file datum.json --out-file 1st.tx  \n  \ncat datum.json  \n{  \n \"constructor\": 0,  \n \"fields\": [{\"int\": 42}]  \n}`\n\n## Second transaction[​](#second-transaction \"Direct link to Second transaction\")\n\nIn this transaction, you can query the UTXO details:\n\n`cardano-cli query utxo --address $(cat payment.script.addr)  \n TxHash TxIx Amount  \n--------------------------------------------------------------------------------------  \n04dfd8feaf87f82c8ec771954179879b22b5f693ed86d78a749111eed2de7879 0 10000000 lovelace + TxOutDatumInline ReferenceTxInsScriptsInlineDatumsInBabbageEra (HashableScriptData \"\\216y\\159\\CAN*\\255\" (ScriptDataConstructor 0 [ScriptDataNumber 42]))`\n`cardano-cli query utxo --address $(cat payment.addr)  \n TxHash TxIx Amount  \n--------------------------------------------------------------------------------------  \n04dfd8feaf87f82c8ec771954179879b22b5f693ed86d78a749111eed2de7879 1 10030116301 lovelace + TxOutDatumNone`\n\nYou can also verify that you have available rewards:\n\n`cardano-cli query stake-address-info --address $(cat stake.addr)  \n[  \n {  \n \"address\": \"stake_test1uq954t492tmusk2dy9z505g3cz3sfpnh0swsqjmzk47rasqyn8uqp\",  \n \"delegation\": \"pool1vzqtn3mtfvvuy8ghksy34gs9g97tszj5f8mr3sn7asy5vk577ec\",  \n \"rewardAccountBalance\": 15192167  \n }  \n]`\n\nNow you can build the transaction with multiple purposes:\n\n`cardano-cli transaction build \\  \n --tx-in 04dfd8feaf87f82c8ec771954179879b22b5f693ed86d78a749111eed2de7879#1 \\  \n --tx-in 04dfd8feaf87f82c8ec771954179879b22b5f693ed86d78a749111eed2de7879#0 \\  \n --tx-in-script-file payment.script \\  \n --change-address $(cat payment.addr) \\  \n --mint \"1 $(cat payment.script.policyid).746F6B656E\" \\  \n --mint-script-file payment.script \\  \n --withdrawal $(cat stake.addr)+15192167 \\  \n --metadata-json-file metadata.json \\  \n --out-file 2nd.tx`\n\nYou can see multiple things happening in this transaction:\n\n`mint-script-file`\n\nFinally, you can verify the result of signing and submitting the transaction:\n\nThe payment address now has:\n\n`cardano-cli query utxo --address $(cat payment.addr)  \n TxHash TxIx Amount  \n--------------------------------------------------------------------------------------  \nc260ebce5868a56ce559f5277e6ca2d47b0eecb5b851b957fcb40a2194f67b29 0 10055118943 lovelace + 1 90d2fad83eaaed2b9fcffb4259c7deaa254f9574b32ee0890eb9e038.746f6b656e + TxOutDatumNone`\n\nThe script address does not have any funds.\n\n`cardano-cli query utxo --address $(cat payment.script.addr)  \n TxHash TxIx Amount  \n--------------------------------------------------------------------------------------`\n\nWe no longer have rewards from delegating:\n\n`cardano-cli query stake-address-info --address $(cat stake.addr)  \n[  \n {  \n \"address\": \"stake_test1uq954t492tmusk2dy9z505g3cz3sfpnh0swsqjmzk47rasqyn8uqp\",  \n \"delegation\": \"pool1vzqtn3mtfvvuy8ghksy34gs9g97tszj5f8mr3sn7asy5vk577ec\",  \n \"rewardAccountBalance\": 0  \n }  \n]`\n\nAnd the best part, it was only done in one transaction.\n\n![Cardano Logo](/assets/cardano-logo-blue.svg)\n![Cardano Logo](/assets/cardano-logo.svg)\n\nCardano is an open-source project. Cardano is a software platform ONLY and does not conduct any independent diligence on, or substantive review of, any blockchain asset, digital currency, cryptocurrency or associated funds. You are fully and solely responsible for evaluating your investments, for determining whether you will exchange blockchain assets based on your own judgement, and for all your decisions as to whether to exchange blockchain assets with Cardano. In many cases, blockchain assets you exchange on the basis of your research may not increase in value, and may decrease in value. Similarly, blockchain assets you exchange on the basis of your research may fall or rise in value after your exchange. Past performance is not indicative of future results. Any investment in blockchain assets involves the risk of loss of part or all of your investment. The value of the blockchain assets you exchange is subject to market and other investment risks.\n\nThis work is licensed under CC BY 4.0\n\n© IOHK 2015-2025 - IOHK Supported Project",
  "images": [],
  "extraction_metadata": {
    "batch_number": 5,
    "extraction_timestamp": "2025-09-29T13:36:21.065926",
    "extraction_time": 2.0337350368499756,
    "source": "tavily_api_raw"
  }
}