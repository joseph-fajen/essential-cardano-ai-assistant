{
  "url": "https://iohk.io/en/research/library/papers/ghosts-of-departed-proofs-functional-pearls/",
  "content": "![IOHK logo](https://ucarecdn.com/a3d997dc-1781-445f-ad59-ad0e58c24cf3/-/resize/200/)\n\n![English](https://ucarecdn.com/c7b0ab3c-801b-48c4-af03-9ddee986dba6/-/resize/10/)English\n\n![English](https://ucarecdn.com/c7b0ab3c-801b-48c4-af03-9ddee986dba6/-/resize/10/)\n\n[Library](/en/research/library/) > Ghosts of Departed Proofs (Functional Pearls)\n\n# [Ghosts of Departed Proofs (Functional Pearls)](https://api.zotero.org/groups/478201/items/RA9U9XYV/file/view?key=PnpP8O1NApZMMF0LVNh7I4I5)\n\nSeptember/2018, Haskell 2018\n\nHASKELLIMPLEMENTATION\n\nLibrary authors often are faced with a design choice: should a function with preconditions be implemented as a partial function, or by returning a failure condition on incorrect use? Neither option is ideal. Partial functions lead to frustrating run-time errors. Failure conditions must be checked at the use-site, placing an unfair tax on the users who have ensured that the function’s preconditions were correctly met.\n\nIn this paper, we introduce an API design concept called “ghosts of departed proofs” based on the following observation: sophisticated preconditions can be encoded in Haskell’s type system with no run-time overhead, by using proofs that inhabit phantom type parameters attached to newtype wrappers. The user expresses correctness arguments by constructing proofs to inhabit these phantom types. Critically, this technique allows the library user to decide when and how to validate that the API’s preconditions are met.\n\nThe “ghosts of departed proofs” approach to API design can achieve many of the bene ts of dependent types and re nement types, yet only requires some minor and well-understood extensions to Haskell 2010. We demonstrate the utility of this approach through a series of case studies, showing how to enforce novel invariants for lists, maps, graphs, shared memory regions, and more.\n\nView full paper\n\n![IOHK logo black and white](https://ucarecdn.com/306dc384-d0ae-479a-9b7e-2814fbeaea9b/-/resize/200/)\n\n##### Products\n\n##### Media\n\n##### Courses\n\n##### Legal\n\n##### Social",
  "images": [],
  "extraction_metadata": {
    "batch_number": 34,
    "extraction_timestamp": "2025-09-19T14:19:59.350485",
    "extraction_time": 1.5324459075927734,
    "source": "tavily_api_raw"
  }
}